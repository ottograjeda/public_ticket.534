!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.download=t()}(this,function(){return function t(e,n,o){function a(e){return String(e)}var r,i,d=window,c="application/octet-stream",l=o||c,s=e,u=!n&&!o&&s,f=document.createElement("a"),p=d.Blob||d.MozBlob||d.WebKitBlob||a,m=n||"download";if(p=p.call?p.bind(d):Blob,"true"===String(this)&&(l=(s=[s,l])[0],s=s[1]),u&&u.length<2048&&(m=u.split("/").pop().split("?")[0],f.href=u,-1!==f.href.indexOf(u))){var b=new XMLHttpRequest;return b.open("GET",u,!0),b.responseType="blob",b.onload=function(e){t(e.target.response,m,c)},setTimeout(function(){b.send()},0),b}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(s)){if(!(2096103.424<s.length&&p!==a))return navigator.msSaveBlob?navigator.msSaveBlob(w(s),m):h(s);l=(s=w(s)).type||c}function w(e){for(var t=e.split(/[:;,]/),n=t[1],o=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),a=o.length,r=0,i=new Uint8Array(a);r<a;++r)i[r]=o.charCodeAt(r);return new p([i],{type:n})}function h(e,t){if("download"in f)return f.href=e,f.setAttribute("download",m),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),!0===t&&setTimeout(function(){d.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return e=e.replace(/^data:([\w\/\-\+]+)/,c),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),t||(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,c)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(r=s instanceof p?s:new p([s],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(r,m);if(d.URL)h(d.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===a)try{return h("data:"+l+";base64,"+d.btoa(r))}catch(e){return h("data:"+l+","+encodeURIComponent(r))}(i=new FileReader).onload=function(e){h(this.result)},i.readAsDataURL(r)}return!0}});